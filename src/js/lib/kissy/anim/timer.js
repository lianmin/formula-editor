/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Jul 18 13:52
*/
KISSY.add("anim/timer","dom,util,./base,./timer/easing,./timer/manager,./timer/fx,./timer/color,./timer/transform,./timer/short-hand".split(","),function(i,g,q,l){function d(b,k,a,e,c){if(!(this instanceof d))return new d(b,k,a,e,c);d.superclass.constructor.apply(this,arguments)}var h=g("dom"),c=g("util"),i=g("./base"),j=g("./timer/easing"),b=g("./timer/manager"),n=g("./timer/fx");g("./timer/color");g("./timer/transform");var p=g("./timer/short-hand"),o=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;c.extend(d,
i,{prepareFx:function(){var b=this.node,k=this._propsData;c.each(k,function(a){a.duration=a.duration*1E3;a.delay=a.delay*1E3;if(typeof a.easing==="string")a.easing=j.toFn(a.easing)});c.each(p,function(a,e){var f,d=k[e],n;if(d){n=d.value;f={};c.each(a,function(a){f[a]=h.css(b,a)});h.css(b,e,n);c.each(f,function(a,e){e in k||(k[e]=c.merge(d,{value:h.css(b,e)}));h.css(b,e,a)});delete k[e]}});var a,e,f,d,g,r,i,l=0,s;c.isPlainObject(b)&&(l=1);for(a in k){e=k[a];f=e.value;r={isCustomFx:l,prop:a,anim:this,
fxType:e.fxType,type:e.type,propData:e};i=n.getFx(r);d=f;g=i.cur();f=f+"";s="";if(f=f.match(o)){d=parseFloat(f[2]);if((s=f[3])&&s!=="px"&&g){var q=0,t=d;do{++t;h.css(b,a,t+s);q=i.cur()}while(q===0);g=t/q*g;h.css(b,a,g+s)}f[1]&&(d=(f[1]==="-="?-1:1)*d+g)}r.from=g;r.to=d;r.unit=s;i.load(r);e.fx=i}},frame:function(){var b,k=1,a,e=this._propsData;for(b in e){a=e[b];a=a.fx;a.frame();if(this.isRejected()||this.isResolved())return;k=k&a.pos===1}e=c.now();b=this.config.duration*1E3;e=Math.max(0,this.startTime+
b-e);this.defer.notify([this,1-(e/b||0),e]);k&&this.stop(k)},doStop:function(c){var k,a=this._propsData;b.stop(this);if(c)for(k in a){c=a[k];(c=c.fx)&&c.frame(1)}},doStart:function(){b.start(this)}});d.Easing=j;d.Fx=n;c.mix(d,i.Statics);l.exports=d});
KISSY.add("anim/timer/easing",[],function(i,g,q,l){function d(a){return a}function h(a,b,c,d){var n=3*a-3*c+1,g=3*c-6*a,h=3*a,o=3*b-3*d+1,i=3*d-6*b,p=3*b;return function(a){a:{for(var b=a,c,e,f=0;8>f;f++){e=((n*b+g)*b+h)*b-a;if(k(e)<m){a=b;break a}c=(3*n*b+2*g)*b+h;if(k(c)<m)break;b-=e/c}c=1;f=0;for(b=a;c>f;){e=((n*b+g)*b+h)*b-a;if(k(e)<m)break;0<e?c=b:f=b;b=(c+f)/2}a=b}return((o*a+i)*a+p)*a}}var c=Math.PI,j=Math.pow,b=Math.sin,n=parseFloat,p=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,o=
{swing:function(a){return 0.5-Math.cos(a*c)/2},easeNone:d,linear:d,easeIn:function(a){return a*a},ease:h(0.25,0.1,0.25,1),"ease-in":h(0.42,0,1,1),"ease-out":h(0,0,0.58,1),"ease-in-out":h(0.42,0,0.58,1),"ease-out-in":h(0,0.42,1,0.58),toFn:function(a){var b;return(b=a.match(p))?h(n(b[1]),n(b[2]),n(b[3]),n(b[4])):o[a]||d},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*
a*a*a},easeBothStrong:function(a){return 1>(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:0-j(2,10*(a-=1))*b((a-0.075)*2*c/0.3)},elasticOut:function(a){return 0===a||1===a?a:j(2,-10*a)*b((a-0.075)*2*c/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*j(2,10*(a-=1))*b((a-0.1125)*2*c/0.45):0.5*j(2,-10*(a-=1))*b((a-0.1125)*2*c/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*
a+1.70158)+1},backBoth:function(a){var b,c=(b=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(c*a-b):0.5*((a-=2)*a*(c*a+b)+2)},bounceIn:function(a){return 1-o.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*o.bounceIn(2*a):0.5*o.bounceOut(2*a-1)+0.5}},m=1.0E-6,k=Math.abs;l.exports=o});
KISSY.add("anim/timer/manager",[],function(i,g,q,l){var d,h;d=function(b){return setTimeout(b,15)};h=function(b){clearTimeout(b)};var c={head:null,tail:null},j=l.exports={runnings:c,timer:null,start:function(b){b._ksNext=b._ksPrev=null;c.head?(b._ksPrev=c.tail,c.tail._ksNext=b,c.tail=b):c.head=c.tail=b;j.startTimer()},stop:function(b){this.notRun(b)},notRun:function(b){if(b._ksPrev){if(c.tail===b&&(c.tail=b._ksPrev),b._ksPrev._ksNext=b._ksNext)b._ksNext._ksPrev=b._ksPrev}else if(c.head=b._ksNext,
c.tail===b&&(c.tail=c.head),c.head)c.head._ksPrev=null;b._ksNext=b._ksPrev=null;c.head||j.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=d(function p(){b.timer=d(p);b.runFrames()&&b.stopTimer()}))},stopTimer:function(){var b=this.timer;b&&(h(b),this.timer=0)},runFrames:function(){for(var b=c.head;b;){var d=b._ksNext;b.frame();b=d}return!c.head}}});
KISSY.add("anim/timer/fx",["util","logger-manager","dom"],function(i,g,q,l){function d(b){h.mix(this,b);this.pos=0;this.unit=this.unit||""}var h=g("util");g("logger-manager");var c=g("dom"),j=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;d.prototype={isCustomFx:0,constructor:d,load:function(b){h.mix(this,b);this.pos=0;this.unit=this.unit||""},frame:function(b){if(1!==this.pos){var d=this.anim,g=this.prop,o=d.node,m=this.from,k=this.propData,a=this.to;if(void 0===b)var e=h.now(),b=k.duration,e=e-d.startTime-
k.delay,b=0>=e?0:e>=b?1:k.easing(e/b);this.pos=b;m===a||0===b||(this.val=m=this.interpolate(m,a,this.pos),k.frame?k.frame.call(this,d,this):this.isCustomFx||(void 0===m?(this.pos=1,m=a):m+=this.unit,this.val=m,"attr"===this.type?c.attr(o,g,m,1):c.css(o,g,m)))}},interpolate:function(b,c,d){return"number"===typeof b&&"number"===typeof c?Math.round(1E5*(b+(c-b)*d))/1E5:null},cur:function(){var b=this.prop,d,g,h,m=this.anim.node;if(this.isCustomFx)return m[b]||0;if(!(d=this.type)){var k;d=this.type=null!==
(h=(!m.style||null==m.style[b])&&null!=(k=c.attr(m,b,void 0,1))?k:null)?"attr":"css"}if("attr"===d)h=void 0===h?c.attr(m,b,void 0,1):h;else if(h=c.style(m,b),d=h.match(j))(d=d[3])&&"px"!==d&&(h=c.css(m,b));return isNaN(g=parseFloat(h))?!h||"auto"===h?0:h:g}};d.Factories={};d.FxTypes={};d.getFx=function(b){var c=d,h,g;if(h=b.fxType)c=d.FxTypes[h];else if(!b.isCustomFx&&(g=d.Factories[b.prop]))c=g;return new c(b)};l.exports=d});
KISSY.add("anim/timer/color",["logger-manager","util","./fx"],function(i,g,q,l){function d(b){var b=b+"",a;if(a=b.match(p))return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10)];if(a=b.match(o))return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4],10)];if(a=b.match(m)){for(b=1;b<a.length;b++)2>a[b].length&&(a[b]+=a[b]);return[parseInt(a[1],j),parseInt(a[2],j),parseInt(a[3],j)]}return n[b=b.toLowerCase()]?n[b]:[255,255,255]}function h(){h.superclass.constructor.apply(this,
arguments)}g("logger-manager");var i=g("util"),c=g("./fx"),j=16,b=Math.floor,n={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},p=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,o=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,m=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;
i.extend(h,c,{load:function(){h.superclass.load.apply(this,arguments);this.from&&(this.from=d(this.from));this.to&&(this.to=d(this.to))},interpolate:function(c,a,e){var f=h.superclass.interpolate;if(3===c.length&&3===a.length)return"rgb("+[b(f(c[0],a[0],e)),b(f(c[1],a[1],e)),b(f(c[2],a[2],e))].join(", ")+")";if(4===c.length||4===a.length)return"rgba("+[b(f(c[0],a[0],e)),b(f(c[1],a[1],e)),b(f(c[2],a[2],e)),b(f(c[3]||1,a[3]||1,e))].join(", ")+")"}});i.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),
function(b){c.Factories[b]=h});c.FxTypes.color=h;l.exports=h});
KISSY.add("anim/timer/transform",["util","feature","dom","./fx"],function(i,g,q,l){function d(b){b=b.split(/,/);return b=n.map(b,function(b){return c(b)})}function h(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function c(b){return Math.round(1E5*parseFloat(b))/1E5}function j(b){for(var b=b.split(")"),g=n.trim,a=-1,e=b.length-1,f,i,j=h();++a<e;)switch(f=b[a].split("("),i=g(f[0]),f=f[1],i){case "translateX":case "translateY":case "scaleX":case "scaleY":j[i]=c(f);break;
case "rotate":case "skewX":case "skewY":var l=c(f);n.endsWith(f,"deg")||(l=180*l/Math.PI);j[i]=l;break;case "translate":case "translate3d":f=f.split(",");j.translateX=c(f[0]);j.translateY=c(f[1]||0);break;case "scale":f=f.split(",");j.scaleX=c(f[0]);j.scaleY=c(f[1]||f[0]);break;case "matrix":return b=f,b=d(b),e=a=g=void 0,i=b[0],j=b[1],f=b[2],l=b[3],i*l-j*f?(g=Math.sqrt(i*i+j*j),e=(i*f+j*l)/(i*l-f*j),a=(i*l-j*f)/g,i*l<j*f&&(e=-e,g=-g)):g=a=e=0,{translateX:c(b[4]),translateY:c(b[5]),rotate:c(180*Math.atan2(j,
i)/Math.PI),skewX:c(180*Math.atan(e)/Math.PI),skewY:0,scaleX:c(g),scaleY:c(a)}}return j}function b(){b.superclass.constructor.apply(this,arguments)}var n=g("util"),i=g("feature"),p=g("dom"),g=g("./fx"),o=i.isTransform3dSupported()?"translate3d({translateX}px,{translateY}px,0)":"translate({translateX}px,{translateY}px)";n.extend(b,g,{load:function(){b.superclass.load.apply(this,arguments);this.from=(this.from=p.style(this.anim.node,"transform")||this.from)&&"none"!==this.from?j(this.from):h();this.to=
this.to?j(this.to):h()},interpolate:function(c,d,a){var e=b.superclass.interpolate,f={};f.translateX=e(c.translateX,d.translateX,a);f.translateY=e(c.translateY,d.translateY,a);f.rotate=e(c.rotate,d.rotate,a);f.skewX=e(c.skewX,d.skewX,a);f.skewY=e(c.skewY,d.skewY,a);f.scaleX=e(c.scaleX,d.scaleX,a);f.scaleY=e(c.scaleY,d.scaleY,a);return n.substitute(o+" rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",f)}});g.Factories.transform=b;l.exports=b});
KISSY.add("anim/timer/short-hand",[],function(i,g,q,l){l.exports={background:["backgroundColor"],border:"borderBottomWidth,borderLeftWidth,borderRightWidth,borderTopWidth,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor".split(","),borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderBottom:["borderBottomWidth","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftColor"],borderTop:["borderTopWidth","borderTopColor"],borderRight:["borderRightWidth",
"borderRightColor"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
