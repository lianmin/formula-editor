/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Jul 18 13:52
*/
KISSY.add("anim/base","dom,querystring,./base/utils,./base/queue,promise,util".split(","),function(n,g,q,m){function l(h,b,d,p,k){if(h.node)k=h;else{if(typeof b==="string"){b=f.parse(""+b,";",":");c.each(b,function(h,a){var d=c.trim(a);d&&(b[d]=c.trim(h));(!d||d!==a)&&delete b[a]})}if(c.isPlainObject(d))k=c.clone(d);else{k={complete:k};if(d)k.duration=d;if(p)k.easing=p}k.node=h;k.to=b}k=c.merge(o,k);l.superclass.constructor.call(this);a.Defer(this);this.config=k;h=k.node;c.isPlainObject(h)||(h=e.get(k.node));
this.node=this.el=h;this._backupProps={};this._propsData={};var h={},b=k.to,j;for(j in b)h[i(j)]=b[j];k.to=h}var e=g("dom"),f=g("querystring"),d=g("./base/utils"),j=g("./base/queue"),a=g("promise"),c=g("util"),b=e.NodeType,i=c.camelCase,n=c.noop,p={toggle:1,hide:1,show:1},o={duration:1,easing:"linear"};c.extend(l,a,{prepareFx:n,runInternal:function(){var h=this,a=h.config,i=h.node,f,k=h._backupProps,j=h._propsData,g=a.to,l=a.delay||0,n=a.duration;d.saveRunningAnim(h);c.each(g,function(h,b){c.isPlainObject(h)||
(h={value:h});j[b]=c.mix({delay:l,easing:a.easing,frame:a.frame,duration:n},h)});if(i.nodeType===b.ELEMENT_NODE){if(g.width||g.height){g=i.style;c.mix(k,{overflow:g.overflow,"overflow-x":g.overflowX,"overflow-y":g.overflowY});g.overflow="hidden"}var o,m;c.each(j,function(c,a){f=c.value;if(p[f]){m===void 0&&(m=e.css(i,"display")==="none");if(f==="hide"&&m||f==="show"&&!m){h.stop(true);return o=false}k[a]=e.style(i,a);f==="toggle"&&(f=m?"show":"hide");if(f==="hide"){c.value=0;k.display="none"}else{c.value=
e.css(i,a);e.css(i,a,0);e.show(i)}}});if(o===false)return}h.startTime=c.now();if(c.isEmptyObject(j)){h.__totalTime=n*1E3;h.__waitTimeout=setTimeout(function(){h.stop(true)},h.__totalTime)}else{h.prepareFx();h.doStart()}},isRunning:function(){return d.isAnimRunning(this)},isPaused:function(){return d.isAnimPaused(this)},pause:function(){if(this.isRunning()){this._runTime=c.now()-this.startTime;this.__totalTime=this.__totalTime-this._runTime;d.removeRunningAnim(this);d.savePausedAnim(this);this.__waitTimeout?
clearTimeout(this.__waitTimeout):this.doStop()}return this},doStop:n,doStart:n,resume:function(){var a=this;if(a.isPaused()){a.startTime=c.now()-a._runTime;d.removePausedAnim(a);d.saveRunningAnim(a);if(a.__waitTimeout)a.__waitTimeout=setTimeout(function(){a.stop(true)},a.__totalTime);else{a.beforeResume();a.doStart()}}return a},beforeResume:n,run:function(){var a;a=this.config.queue;if(a===false)this.runInternal();else{a=j.queue(this.node,a,this);a.length===1&&this.runInternal()}return this},stop:function(a){var b=
this.node,i=this.config.queue;if(this.isResolved()||this.isRejected())return this;if(this.__waitTimeout){clearTimeout(this.__waitTimeout);this.__waitTimeout=0}if(!this.isRunning()&&!this.isPaused()){i!==false&&j.remove(b,i,this);return this}this.doStop(a);d.removeRunningAnim(this);d.removePausedAnim(this);var f=this.defer;if(a){var g,a=this.config.complete;c.isEmptyObject(g=this._backupProps)||e.css(this.node,g);a&&a.call(this);f.resolve([this])}else f.reject([this]);if(i!==false)(b=j.dequeue(b,i))&&
b[0]&&b[0].runInternal();return this}});var r=l.Statics={isRunning:d.isElRunning,isPaused:d.isElPaused,stop:d.stopEl,Q:j};c.each(["pause","resume"],function(a){r[a]=function(c,b){return b===null||typeof b==="string"||b===false?d.pauseOrResumeQueue(c,b,a):d.pauseOrResumeQueue(c,void 0,a)}});m.exports=l});
KISSY.add("anim/base/utils",["./queue","util","dom"],function(n,g,q,m){var l=g("./queue"),e=g("util"),f=g("dom"),d=e.guid("ks-anim-unqueued-"+e.now()+"-"),j=e.guid("ks-anim-paused-"+e.now()+"-");m.exports={saveRunningAnim:function(a){var c=a.node,b=f.data(c,d);b||f.data(c,d,b={});b[e.stamp(a)]=a},removeRunningAnim:function(a){var c=a.node,b=f.data(c,d);b&&(delete b[e.stamp(a)],e.isEmptyObject(b)&&f.removeData(c,d))},isAnimPaused:function(a){var c=f.data(a.node,j);return c?!!c[e.stamp(a)]:0},removePausedAnim:function(a){var c=
a.node,b=f.data(c,j);b&&(delete b[e.stamp(a)],e.isEmptyObject(b)&&f.removeData(c,j))},savePausedAnim:function(a){var c=a.node,b=f.data(c,j);b||f.data(c,j,b={});b[e.stamp(a)]=a},isAnimRunning:function(a){var c=f.data(a.node,d);return c?!!c[e.stamp(a)]:0},isElPaused:function(a){return(a=f.data(a,j))&&!e.isEmptyObject(a)},isElRunning:function(a){return(a=f.data(a,d))&&!e.isEmptyObject(a)},pauseOrResumeQueue:function(a,c,b){a=f.data(a,"resume"===b?j:d);a=e.merge(a);e.each(a,function(a){if(void 0===c||
a.config.queue===c)a[b]()})},stopEl:function(a,c,b,i){b&&(void 0===i?l.clearQueues(a):!1!==i&&l.clearQueue(a,i));a=f.data(a,d);a=e.merge(a);e.each(a,function(a){(void 0===i||a.config.queue===i)&&a.stop(c)})}}});
KISSY.add("anim/base/queue",["dom","util"],function(n,g,q,m){function l(a,b,i){var b=b||j,f,g=e.data(a,d);!g&&!i&&e.data(a,d,g={});g&&(f=g[b],!f&&!i&&(f=g[b]=[]));return f}var e=g("dom"),f=g("util"),d=f.guid("ks-queue-"+f.now()+"-"),j=f.guid("ks-queue-"+f.now()+"-"),a;a={queueCollectionKey:d,queue:function(a,b,d){a=l(a,b);a.push(d);return a},remove:function(c,b,d){var e=l(c,b,1);e&&(d=f.indexOf(d,e),-1<d&&e.splice(d,1));e&&!e.length&&a.clearQueue(c,b);return e},clearQueues:function(a){e.removeData(a,
d)},clearQueue:function(a,b){var b=b||j,i=e.data(a,d);i&&delete i[b];f.isEmptyObject(i)&&e.removeData(a,d)},dequeue:function(c,b){var d=l(c,b,1);d&&(d.shift(),d.length||a.clearQueue(c,b));return d}};m.exports=a});
