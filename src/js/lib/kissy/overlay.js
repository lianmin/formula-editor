/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Jul 18 14:04
*/
KISSY.add("overlay",["overlay/control","overlay/dialog","overlay/popup"],function(j,f,m,h){j=f("overlay/control");m=f("overlay/dialog");f=f("overlay/popup");j.Dialog=m;j.Popup=f;h.exports=j});
KISSY.add("overlay/control","component/container,component/extension/shim,component/extension/align,./extension/loading,./extension/mask,./extension/overlay-effect,component/extension/content-box,./overlay-xtpl".split(","),function(j,f,m,h){var j=f("component/container"),m=f("component/extension/shim"),n=f("component/extension/align"),g=f("./extension/loading"),i=f("./extension/mask"),b=f("./extension/overlay-effect"),e=f("component/extension/content-box"),f=f("./overlay-xtpl"),k={hide:"hide",destroy:"destroy"};
h.exports=j.extend([e,m,g,n,i,b],{bindUI:function(){var b=this,a=b.get("closeBtn");if(a)a.on("click",function(d){b.close();d.preventDefault()})},close:function(){this[k[this.get("closeAction")]||"hide"]();return this}},{ATTRS:{handleGestureEvents:{value:false},focusable:{value:false},allowTextSelection:{value:true},contentTpl:{value:f},closable:{value:false,sync:0,render:1,parse:function(){return!!this.get("closeBtn")}},closeBtn:{selector:function(){return"."+this.getBaseCssClass("close")}},closeAction:{value:"hide"},
closeText:{value:"close",render:1},visible:{value:false}},xclass:"overlay"})});
KISSY.add("overlay/extension/loading",["node"],function(j,f,m,h){function n(){}var g=f("node");n.prototype={loading:function(){this._loadingExtEl||(this._loadingExtEl=g('<div class="'+this.get("prefixCls")+'ext-loading" style="position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);"/>').appendTo(this.$el));this._loadingExtEl.show()},unloading:function(){this._loadingExtEl&&this._loadingExtEl.hide()}};h.exports=n});
KISSY.add("overlay/extension/mask",["ua","node","event/gesture/tap"],function(j,f,m,h){function n(d,l){var c=d.getBaseCssClasses("mask"),c=o('<div  style="width:'+(k?"expression(KISSY.DOM.docWidth())":"100%")+";left:0;top:0;height:"+(k?"expression(KISSY.DOM.docHeight())":"100%")+";position:"+(k?"absolute":"fixed")+';" class="'+c+" "+l+'">'+(k?'<iframe style="position:absolute;left:0;top:0;background:red;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':
"")+"</div>").prependTo("body");c.unselectable();c.on("mousedown",function(c){c.preventDefault()});return c}function g(){}function i(d,l){var c=d.get("maskNode"),a=d.getBaseCssClasses("mask-hidden");l?c.removeClass(a):c.addClass(a)}function b(a,l,c,b){var e=a.effect||d;i(b,c);if(e!==d){var b=a.duration,a=a.easing,f=c?1:0;l.stop(1,1);l.css("display",c?d:"block");l[e+p[e][f]](b,function(){l.css("display","")},a)}}function e(a){var d=this.get("maskNode");if(a=a.newVal){var c=Number(this.$el.css("z-index"));
isNaN(c)||d.css("z-index",c)}b(this.get("mask"),d,a,this)}var k=6===f("ua").ie,o=f("node"),a=f("event/gesture/tap").TAP;g.ATTRS={mask:{value:!1},maskNode:{}};var d="none",p={fade:["Out","In"],slide:["Up","Down"]};g.prototype={__renderUI:function(){this.get("mask")&&this.set("maskNode",n(this,this.get("visible")?"":this.getBaseCssClasses("mask-hidden")))},__bindUI:function(){var d,b;if(b=this.get("mask")){d=this.get("maskNode");if(b.closeOnClick)d.on(a,this.close,this);this.on("afterVisibleChange",
e)}},__destructor:function(){var d;(d=this.get("maskNode"))&&d.remove()}};h.exports=g});
KISSY.add("overlay/extension/overlay-effect",["util","node"],function(j,f,m,h){function n(a){var d=a.$el.clone(!0);d.css({visibility:"hidden",overflow:"hidden"}).addClass(a.get("prefixCls")+"overlay-ghost");return a.__afterCreateEffectGhost(d)}function g(a,d){a.__effectGhost&&a.__effectGhost.stop(1,1);var b=a.$el,e=f("node"),l=a.get("effect"),c=e(l.target),e=l.duration,g={width:c.width(),height:c.height()},k=c.offset(),q={width:b.width(),height:b.height()},r=b.offset(),h,i=n(a),j=l.easing;i.insertAfter(b);
d?(c=g,h=k,g=q,k=r):(c=q,h=r);i.offset(k);o.mix(g,{left:i.css("left"),top:i.css("top")});b.css("visibility","hidden");i.css(c);i.offset(h);a.__effectGhost=i;i.css("visibility","visible");i.animate(g,{Anim:l.Anim,duration:e,easing:j,complete:function(){a.__effectGhost=null;i.remove();b.css("visibility","")}})}function i(b,d){var e=b.$el,f=b.get("effect"),l=f.effect||"none",c=f.target;if("none"!==l||c)if(c)g(b,d);else{var c=f.duration,i=f.easing,h=d?1:0;e.stop(1,1);e.css({visibility:"visible",display:d?
"none":"block"});e[l+k[l][h]]({duration:c,Anim:f.Anim,complete:function(){e.css({display:"block",visibility:""})},easing:i})}}function b(b){i(this,b.newVal)}function e(){}var k={fade:["Out","In"],slide:["Up","Down"]},o=f("util");e.ATTRS={effect:{valueFn:function(){return{effect:"",target:null,duration:0.5,easing:"easeOut"}},setter:function(b){var d=b.effect;"string"===typeof d&&!k[d]&&(b.effect="")}}};e.prototype={__afterCreateEffectGhost:function(b){return b},__bindUI:function(){this.on("afterVisibleChange",
b,this)}};h.exports=e});
KISSY.add("overlay/overlay-xtpl",[],function(j,f,m,h){h.exports=function(f,g,i){var b=this,e=b.root.nativeCommands,k=b.root.utils.callFn,h=e["if"],e=e.block;g.write("",0);var a={escape:1},d=[];d.push("ks-overlay-closable");a.params=d;a.fn=function(d,a){a.write("\r\n    ",0);var e={escape:1},c=[],f=d.resolve(["closable"],0);c.push(f);e.params=c;e.fn=function(d,c){c.write('\r\n        <a href="javascript:void(\'close\')"\r\n           aria-label="Close"\r\n           class="',0);var a={escape:1},e=
[];e.push("close");a.params=e;if((a=k(b,d,a,c,["getBaseCssClasses"],0,5))&&a.isBuffer)c=a,a=i;c.write(a,!0);c.write("\"\r\n           role='button'>\r\n            <span class=\"",0);a={escape:1};e=[];e.push("close-x");a.params=e;if((a=k(b,d,a,c,["getBaseCssClasses"],0,7))&&a.isBuffer)c=a,a=i;c.write(a,!0);c.write('">',0);a=d.resolve(["closeText"],0);c.write(a,!1);c.write("</span>\r\n        </a>\r\n    ",0);return c};a=h.call(b,d,e,a,2);a.write("\r\n",0);return a};g=e.call(b,f,a,g,1);g.write('\r\n\r\n<div class="',
0);a={escape:1};d=[];d.push("content");a.params=d;if((a=k(b,f,a,g,["getBaseCssClasses"],0,12))&&a.isBuffer)g=a,a=i;g.write(a,!0);g.write('">\r\n    ',0);a={escape:1};d=[];d.push("ks-overlay-content");a.params=d;a.fn=function(a,d){d.write("\r\n        ",0);var b=a.resolve(["content"],0);d.write(b,!1);d.write("\r\n    ",0);return d};g=e.call(b,f,a,g,13);g.write("\r\n</div>",0);return g};h.exports.TPL_NAME=h.name});
KISSY.add("overlay/dialog",["util","./control","node","./dialog-xtpl"],function(j,f,m,h){var n=f("util"),j=f("./control"),g=f("node"),f=f("./dialog-xtpl"),f=j.extend({beforeCreateDom:function(b){n.mix(b.elAttrs,{role:"dialog","aria-labelledby":"ks-stdmod-header-"+this.get("id")})},getChildrenContainerEl:function(){return this.get("body")},__afterCreateEffectGhost:function(b){var e=this.get("body");b.all("."+this.get("prefixCls")+"stdmod-body").css({height:e.height(),width:e.width()}).html("");return b},
handleKeyDownInternal:function(b){if(this.get("escapeToClose")&&b.keyCode===g.Event.KeyCode.ESC){if("select"!==b.target.nodeName.toLowerCase()||b.target.disabled)this.close(),b.halt()}else a:if(b.keyCode===i){var e=this.$el,f=g(b.target),h=e.last();if(f.equals(e)&&b.shiftKey)h[0].focus(),b.halt();else if(f.equals(h)&&!b.shiftKey)this.focus(),b.halt();else if(f.equals(e)||e.contains(f))break a;b.halt()}},_onSetVisible:function(b,e){var f=this.el;this.callSuper(b,e);if(b)this.__lastActive=f.ownerDocument.activeElement,
this.focus(),f.setAttribute("aria-hidden","false");else{f.setAttribute("aria-hidden","true");try{this.__lastActive&&this.__lastActive.focus()}catch(g){}}},_onSetBodyContent:function(b){var e;e=this.get("body");e.html(b)},_onSetHeaderContent:function(b){var e;e=this.get("header");e.html(b)},_onSetFooterContent:function(b){var e;e=this.get("footer");e.html(b)}},{ATTRS:{focusable:{value:!0},contentTpl:{value:f},header:{selector:function(){return"."+this.getBaseCssClass("header")}},body:{selector:function(){return"."+
this.getBaseCssClass("body")}},footer:{selector:function(){return"."+this.getBaseCssClass("footer")}},bodyStyle:{sync:0},footerStyle:{render:1},headerStyle:{render:1},headerContent:{value:"",sync:0,render:1,parse:function(){return this.get("header").html()}},bodyContent:{value:"",sync:0,render:1,parse:function(){return this.get("body").html()}},footerContent:{value:"",sync:0,render:1,parse:function(){return this.get("footer").html()}},closable:{value:!0},escapeToClose:{value:!0}},xclass:"dialog"}),
i=g.Event.KeyCode.TAB;h.exports=f});
KISSY.add("overlay/dialog-xtpl",["./overlay-xtpl"],function(j,f,m,h){h.exports=function(h,g,i){var b=this,e=b.root.nativeCommands,k=b.root.utils.callFn,j=e.each,a=e.extend,e=e.block;g.write("",0);var d={},p=[];p.push("./overlay-xtpl");d.params=p;f("./overlay-xtpl");if((a=a.call(b,h,d,g,1))&&a.isBuffer)g=a,a=i;g.write(a,!1);g.write("\r\n",0);a={escape:1};d=[];d.push("ks-overlay-content");a.params=d;a.fn=function(d,a){a.write('\r\n    <div class="',0);var c={escape:1},e=[];e.push("header");c.params=
e;if((c=k(b,d,c,a,["getBaseCssClasses"],0,3))&&c.isBuffer)a=c,c=i;a.write(c,!0);a.write('"\r\n         style="\r\n',0);var c={escape:1},e=[],f=d.resolve(["headerStyle"],0);e.push(f);c.params=e;c.fn=function(a,d){d.write("\r\n ",0);var c=a.resolve(["xindex"],0);d.write(c,!0);d.write(":",0);c=a.resolve(["this"],0);d.write(c,!0);d.write(";\r\n",0);return d};a=j.call(b,d,c,a,5);a.write('\r\n">',0);c=d.resolve(["headerContent"],0);a.write(c,!1);a.write('</div>\r\n\r\n    <div class="',0);c={escape:1};
e=[];e.push("body");c.params=e;if((c=k(b,d,c,a,["getBaseCssClasses"],0,10))&&c.isBuffer)a=c,c=i;a.write(c,!0);a.write('"\r\n         style="\r\n',0);c={escape:1};e=[];f=d.resolve(["bodyStyle"],0);e.push(f);c.params=e;c.fn=function(a,d){d.write("\r\n ",0);var c=a.resolve(["xindex"],0);d.write(c,!0);d.write(":",0);c=a.resolve(["this"],0);d.write(c,!0);d.write(";\r\n",0);return d};a=j.call(b,d,c,a,12);a.write('\r\n">',0);c=d.resolve(["bodyContent"],0);a.write(c,!1);a.write('</div>\r\n\r\n    <div class="',
0);c={escape:1};e=[];e.push("footer");c.params=e;if((c=k(b,d,c,a,["getBaseCssClasses"],0,17))&&c.isBuffer)a=c,c=i;a.write(c,!0);a.write('"\r\n         style="\r\n',0);c={escape:1};e=[];f=d.resolve(["footerStyle"],0);e.push(f);c.params=e;c.fn=function(a,d){d.write("\r\n ",0);var c=a.resolve(["xindex"],0);d.write(c,!0);d.write(":",0);c=a.resolve(["this"],0);d.write(c,!0);d.write(";\r\n",0);return d};a=j.call(b,d,c,a,19);a.write('\r\n">',0);c=d.resolve(["footerContent"],0);a.write(c,!1);a.write('</div>\r\n    <div tabindex="0"></div>\r\n',
0);return a};return g=e.call(b,h,a,g,2)};h.exports.TPL_NAME=h.name});
KISSY.add("overlay/popup",["./control","util","node"],function(j,f,m,h){function n(){var a=this,b=a.get("trigger"),f;a.__mouseEnterPopup=function(b){i.call(a);f=o.later(function(){e.call(a,b);f=void 0},1E3*a.get("mouseDelay"))};b.on("mouseenter",a.__mouseEnterPopup);a._mouseLeavePopup=function(){f&&(f.cancel(),f=void 0);g.call(a)};b.on("mouseleave",a._mouseLeavePopup)}function g(){var a=this,b=1E3*a.get("mouseDelay");a._hiddenTimer=o.later(function(){k.call(a)},b)}function i(){this._hiddenTimer&&
(this._hiddenTimer.cancel(),this._hiddenTimer=void 0)}function b(){var a=this;a.__clickPopup=function(b){b.preventDefault();a.get("toggle")?(a.get("visible")?k:e).call(a,b):e.call(a,b)};a.get("trigger").on("click",a.__clickPopup)}function e(d){this.set("currentTrigger",a(d.target));this.show()}function k(){this.set("currentTrigger",void 0);this.hide()}var j=f("./control"),o=f("util"),a=f("node");h.exports=j.extend({initializer:function(){this.get("trigger")&&("mouse"===this.get("triggerType")?n.call(this):
b.call(this))},bindUI:function(){if(this.get("trigger")&&"mouse"===this.get("triggerType"))this.$el.on("mouseleave",g,this).on("mouseenter",i,this)},destructor:function(){var a=this.$el,b=this.get("trigger");b&&(this.__clickPopup&&b.detach("click",this.__clickPopup),this.__mouseEnterPopup&&b.detach("mouseenter",this.__mouseEnterPopup),this._mouseLeavePopup&&b.detach("mouseleave",this._mouseLeavePopup));a&&a.detach("mouseleave",g,this).detach("mouseenter",i,this)}},{ATTRS:{trigger:{setter:function(b){return a(b)}},
triggerType:{value:"click"},currentTrigger:{},mouseDelay:{value:0.1},toggle:{value:!1}},xclass:"popup"})});
