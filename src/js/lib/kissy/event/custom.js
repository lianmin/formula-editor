/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Jul 18 14:01
*/
KISSY.add("event/custom",["./custom/target","util","./custom/object"],function(e,b,j,i){e=b("./custom/target");j=b("util");i.exports={Target:e,Object:b("./custom/object"),global:j.mix({},e)}});
KISSY.add("event/custom/target",["event/base","./observable","util"],function(e,b,j,i){function g(d,c){var a=d.getEventListeners(c);a||(a=d.getEventListeners()[c]=new l({currentTarget:d,type:c}));return a}var e=b("event/base"),l=b("./observable"),m=b("util"),n=e.Utils,a=n.splitAndRun;i.exports={isTarget:1,fire:function(d,c){var o=this,f,p=o.getTargets(),b=p&&p.length;d.isEventObject&&(c=d,d=d.type);c=c||{};a(d,function(d){var a;n.fillGroupsForEvent(d,c);d=c.type;if((a=o.getEventListeners(d))||b){if(a){if(!a.hasObserver()&&
!a.defaultFn&&(a.bubbles&&!b||!a.bubbles))return}else a=new l({currentTarget:o,type:d});d=a.fire(c);f!==false&&d!==void 0&&(f=d)}});return f},publish:function(d,c){var b,f=this;a(d,function(a){b=g(f,a);m.mix(b,c)});return f},addTarget:function(a){var c=this.getTargets();m.inArray(a,c)||c.push(a);return this},removeTarget:function(a){var c=this.getTargets(),a=m.indexOf(a,c);-1!==a&&c.splice(a,1);return this},getTargets:function(){return this["__~ks_bubble_targets"]||(this["__~ks_bubble_targets"]=[])},
getEventListeners:function(a){var c=this["__~ks_custom_events"]||(this["__~ks_custom_events"]={});return a?c[a]:c},on:function(a,c,b){var f=this;n.batchForType(function(a,c,d){c=n.normalizeParam(a,c,d);a=c.type;g(f,a).on(c)},0,a,c,b);return f},detach:function(a,c,b){var f=this;n.batchForType(function(a,c,d){var b=n.normalizeParam(a,c,d);(a=b.type)?(a=f.getEventListeners(a))&&a.detach(b):m.each(f.getEventListeners(),function(a){a.detach(b)})},0,a,c,b);return f}}});
KISSY.add("event/custom/observable",["event/base","./observer","./object","util"],function(e,b,j,i){function g(){g.superclass.constructor.apply(this,arguments);this.defaultFn=null;this.defaultTargetOnly=!1;this.bubbles=!0}var e=b("event/base"),l=b("./observer"),m=b("./object"),n=e.Utils;b("util").extend(g,e.Observable,{on:function(a){a=new l(a);-1===this.findObserver(a)&&this.observers.push(a)},fire:function(a){var a=a||{},d=this.bubbles,c=this.currentTarget,b,f=this.type,e=this.defaultFn,g,h=a,k;
a.type=f;h.isEventObject||(h=new m(h));h.target=h.target||c;h.currentTarget=c;a=this.notify(h);!1!==k&&void 0!==a&&(k=a);if(d&&!h.isPropagationStopped()){b=(d=c.getTargets())&&d.length||0;for(g=0;g<b&&!h.isPropagationStopped();g++)a=d[g].fire(f,h),!1!==k&&void 0!==a&&(k=a)}if(e&&!h.isDefaultPrevented()&&(f=h.target,a=f.getEventListeners(h.type),!this.defaultTargetOnly&&(!a||!a.defaultTargetOnly)||c===f))k=e.call(c,h);return k},notify:function(a){var d=[].concat(this.observers),c,b,f=d.length,e;for(e=
0;e<f&&!a.isImmediatePropagationStopped();e++)c=d[e].notify(a,this),!1!==b&&void 0!==c&&(b=c);return b},detach:function(a){var b,c=a.fn,e=a.context,f=this.currentTarget,g=this.observers,a=a.groups;if(g.length){a&&(b=n.getGroupsRe(a));var i,h,k,m,l=g.length;if(c||b){e=e||f;i=a=0;for(h=[];a<l;++a){k=g[a];var j=k.config;m=j.context||f;if(e!==m||c&&c!==j.fn||b&&!j.groups.match(b))h[i++]=k}this.observers=h}else this.reset()}}});i.exports=g});
KISSY.add("event/custom/observer",["event/base","util"],function(e,b,j,i){function g(){g.superclass.constructor.apply(this,arguments)}e=b("event/base");b("util").extend(g,e.Observer,{keys:["fn","context","groups"]});i.exports=g});KISSY.add("event/custom/object",["event/base","util"],function(e,b,j,i){function g(b){g.superclass.constructor.call(this);l.mix(this,b)}var e=b("event/base"),l=b("util");l.extend(g,e.Object);i.exports=g});
